/*
* Square1 Slider
* Copyright (c) 2016 Thom Hines
* Licensed under MIT.
* @author Thom Hines
* https://github.com/thomhines/square1
* @version 0.1.2
*/

!function(e){e.fn.square1=function(a){function t(){l=1,r(),u(),_.onPlay()}function n(){clearInterval(l),_.onStop()}function r(){l&&(clearInterval(l),l=setInterval(i,_.slide_duration+_.transition_time),e(c).data("interval",l))}function i(){var a=e(".current_slide",c).index();o(a==e(".image_wrapper",c).length-1?0:a+1)}function s(){var a=e(".current_slide",c).index();o(0==a?e(".image_wrapper",c).last().index():a-1)}function o(a){e(".image_wrapper",c).finish().clearQueue(),"cover"==_.fill_mode?a>e(".current_slide",c).index()?(e(".current_slide",c).removeClass("current_slide"),e(".image_wrapper",c).eq(a).addClass("current_slide").fadeIn(_.transition_time,function(){e(".image_wrapper:not(.current_slide)",c).hide()})):a<e(".current_slide",c).index()&&(e(".current_slide",c).removeClass("current_slide").fadeOut(_.transition_time),e(".image_wrapper",c).eq(a).addClass("current_slide").show()):(e(".current_slide",c).removeClass("current_slide").fadeOut(_.transition_time),e(".image_wrapper",c).eq(a).addClass("current_slide").fadeIn(_.transition_time)),r(),d(),u(),_.onChange()}function d(){return"none"==_.caption?void e(".square1_caption",c).remove():void e(".square1_caption",c).fadeOut(_.transition_time,function(){setTimeout(function(){e(".square1_caption",c).html(e(".current_slide img",c).attr("alt")).fadeIn(_.transition_time-200)},10)})}function u(){return"none"==_.dots_nav?void e(".square1_dots",c).remove():(e(".square1_dots span",c).removeClass("current"),void e('.square1_dots span[data-image-num="'+e(".current_slide",c).index()+'"]',c).addClass("current"))}var _,l,c=this;if(!(c.length<1)){if(e(c).data("settings")){var _=e(c).data("settings");l=e(c).data("interval")}else{var _=e.extend({width:"",height:"",fill_mode:"cover",background:"#fff",auto_start:!0,start_delay:0,slide_duration:4e3,transition_time:500,pause_on_hover:!1,keyboard:!0,theme:"dark",prev_next_nav:"inside",dots_nav:"inside",caption:"outside",onPlay:function(){},onStop:function(){},onChange:function(){}},a);e(c).data("settings",_)}if("play"==a)return void t();if("stop"==a)return _.auto_start=!1,void n();if("next"==a)return i(),void(_.auto_start&&r());if("prev"==a)return s(),void(_.auto_start&&r());if(Math.floor(a)===a&&+a===a)return o(a-1),void(_.auto_start&&r());e(c).css({position:"relative",width:_.width,height:_.height}),c.addClass("square1"),_.keyboard&&!c.attr("tabindex")&&c.attr("tabindex",0),e(c).children().wrap('<div class="image_wrapper" />'),e(".image_wrapper",c).each(function(){var a=e(this).find("img").attr("src");e(this).css("background-image","url("+a+")")}),e(".image_wrapper:first",c).addClass("current_slide"),e(".image_wrapper:not(.current_slide)",c).hide(),e(c).append('<div class="square1_caption"></div>'),e(c).append('<div class="square1_controls"><span class="square1_prev_image">Previous Image</span><span class="square1_next_image">Next Image</span><div class="square1_dots"></div></div>');var p=0;return e(".image_wrapper",c).each(function(){e(".square1_dots",c).append('<span data-image-num="'+p+'"></span>'),p++}),e(c).addClass("fill_mode-"+_.fill_mode),e(c).addClass("theme-"+_.theme),e(c).addClass("prev_next_nav-"+_.prev_next_nav),e(c).addClass("dots_nav-"+_.dots_nav),e(c).addClass("caption-"+_.caption),e(".square1_prev_image",c).click(function(){s()}),e(".square1_next_image",c).click(function(){i()}),e(".square1_dots span",c).click(function(){o(e(this).data("image-num"))}),e(c).keypress(function(e){if(37==e.keyCode||38==e.keyCode)s();else{if(39!=e.keyCode&&40!=e.keyCode)return;i()}e.preventDefault(),e.stopPropagation()}),e(c).on("mouseenter",".image_wrapper",function(){_.pause_on_hover&&n()}),e(c).on("mouseleave",".image_wrapper",function(){_.pause_on_hover&&_.auto_start&&t()}),_.auto_start&&setTimeout(t,_.start_delay),d(),c}}}(jQuery);
