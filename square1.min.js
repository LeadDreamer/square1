/*
* Square1 Slider
* Copyright (c) 2016 Thom Hines
* Licensed under MIT.
* @author Thom Hines
* https://github.com/thomhines/square1
* @version 0.1.2
*/


!function(e){e.fn.square1=function(a){function t(){r(),u(),_.onPlay()}function n(){clearInterval(c),_.onStop()}function r(){clearInterval(c),c=setInterval(i,_.slide_duration+_.transition_time),e(l).data("interval",c)}function i(){var a=e(".current_slide",l).index();o(a==e(".image_wrapper",l).length-1?0:a+1)}function s(){var a=e(".current_slide",l).index();o(0==a?e(".image_wrapper",l).last().index():a-1)}function o(a){e(".image_wrapper",l).clearQueue(),"cover"==_.fill_mode?a>e(".current_slide",l).index()?(e(".current_slide",l).removeClass("current_slide"),e(".image_wrapper",l).eq(a).addClass("current_slide").fadeIn(_.transition_time,function(){e(".image_wrapper:not(.current_slide)",l).hide()})):a<e(".current_slide",l).index()&&(e(".current_slide",l).removeClass("current_slide").fadeOut(_.transition_time),e(".image_wrapper",l).eq(a).addClass("current_slide").show()):(e(".current_slide",l).removeClass("current_slide").fadeOut(_.transition_time),e(".image_wrapper",l).eq(a).addClass("current_slide").fadeIn(_.transition_time)),d(),u(),_.onChange()}function d(){return"none"==_.caption?void e(".square1_caption",l).remove():void e(".square1_caption",l).fadeOut(_.transition_time,function(){setTimeout(function(){e(".square1_caption",l).html(e(".current_slide img",l).attr("alt")).fadeIn(_.transition_time-200)},10)})}function u(){return"none"==_.dots_nav?void e(".square1_dots",l).remove():(e(".square1_dots span",l).removeClass("current"),void e('.square1_dots span[data-image-num="'+e(".current_slide",l).index()+'"]',l).addClass("current"))}var _,c,l=this;if(!(l.length<1)){if(e(l).data("settings")){var _=e(l).data("settings");c=e(l).data("interval")}else{var _=e.extend({width:"",height:"",fill_mode:"cover",background:"#fff",auto_start:!0,start_delay:0,slide_duration:4e3,transition_time:500,pause_on_hover:!1,theme:"dark",prev_next_nav:"inside",dots_nav:"inside",caption:"outside",onPlay:function(){},onStop:function(){},onChange:function(){}},a);e(l).data("settings",_)}if("play"==a)return void t();if("stop"==a)return _.auto_start=!1,void n();if("next"==a)return i(),void(_.auto_start&&r());if("prev"==a)return s(),void(_.auto_start&&r());if(Math.floor(a)===a&&+a===a)return o(a-1),void(_.auto_start&&r());e(l).css({position:"relative",width:_.width,height:_.height}),l.addClass("square1"),e(l).children().wrap('<div class="image_wrapper" />'),e(".image_wrapper",l).each(function(){var a=e(this).find("img").attr("src");e(this).css("background-image","url("+a+")")}),e(".image_wrapper:first",l).addClass("current_slide"),e(".image_wrapper:not(.current_slide)",l).hide(),e(l).append('<div class="square1_caption"></div>'),e(l).append('<div class="square1_controls"><span class="square1_prev_image">Previous Image</span><span class="square1_next_image">Next Image</span><div class="square1_dots"></div></div>');var p=0;return e(".image_wrapper",l).each(function(){e(".square1_dots",l).append('<span data-image-num="'+p+'"></span>'),p++}),e(l).addClass("fill_mode-"+_.fill_mode),e(l).addClass("theme-"+_.theme),e(l).addClass("prev_next_nav-"+_.prev_next_nav),e(l).addClass("dots_nav-"+_.dots_nav),e(l).addClass("caption-"+_.caption),e(".square1_prev_image",l).click(function(){s(),_.auto_start&&r()}),e(".square1_next_image",l).click(function(){i(),_.auto_start&&r()}),e(".square1_dots span",l).click(function(){o(e(this).data("image-num")),_.auto_start&&r()}),e(l).on("mouseenter",".image_wrapper",function(){_.pause_on_hover&&n()}),e(l).on("mouseleave",".image_wrapper",function(){_.pause_on_hover&&_.auto_start&&t()}),_.auto_start&&setTimeout(t,_.start_delay),d(),l}}}(jQuery);
